{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///E:/leguajes/New%20folder/planet-express-crm---edici%C3%B3n-3000/lib/prisma.ts"],"sourcesContent":["import { PrismaClient } from '@prisma/client'\r\n\r\nconst prismaClientSingleton = () => {\r\n    return new PrismaClient()\r\n}\r\n\r\ntype PrismaClientSingleton = ReturnType<typeof prismaClientSingleton>\r\n\r\nconst globalForPrisma = globalThis as unknown as {\r\n    prisma: PrismaClientSingleton | undefined\r\n}\r\n\r\nconst prisma = globalForPrisma.prisma ?? prismaClientSingleton()\r\n\r\nexport default prisma\r\n\r\nif (process.env.NODE_ENV !== 'production') globalForPrisma.prisma = prisma\r\n"],"names":[],"mappings":";;;;AAAA;;AAEA,MAAM,wBAAwB;IAC1B,OAAO,IAAI,sMAAY;AAC3B;AAIA,MAAM,kBAAkB;AAIxB,MAAM,SAAS,gBAAgB,MAAM,IAAI;uCAE1B;AAEf,wCAA2C,gBAAgB,MAAM,GAAG"}},
    {"offset": {"line": 21, "column": 0}, "map": {"version":3,"sources":["file:///E:/leguajes/New%20folder/planet-express-crm---edici%C3%B3n-3000/app/actions.ts"],"sourcesContent":["\"use server\";\r\n\r\nimport prisma from \"@/lib/prisma\";\r\nimport { revalidatePath } from \"next/cache\";\r\n\r\nexport async function getClientes() {\r\n    // Model 'Cliente' -> prisma.cliente\r\n    return await prisma.cliente.findMany({\r\n        orderBy: { id: \"asc\" },\r\n    });\r\n}\r\n\r\nexport async function createCliente(formData: FormData) {\r\n    const nombre = formData.get(\"nombre\") as string;\r\n    const correo = formData.get(\"email\") as string; // Form field is 'email', DB is 'correo'\r\n    const telefono = formData.get(\"telefono\") as string;\r\n\r\n    await prisma.cliente.create({\r\n        data: {\r\n            nombre,\r\n            correo,\r\n            telefono,\r\n            fechaRegistro: new Date(),\r\n        },\r\n    });\r\n\r\n    revalidatePath(\"/\");\r\n}\r\n\r\nexport async function updateCliente(id: number, formData: FormData) {\r\n    const nombre = formData.get(\"nombre\") as string;\r\n    const correo = formData.get(\"email\") as string;\r\n    const telefono = formData.get(\"telefono\") as string;\r\n\r\n    // 1. Update Client\r\n    const clientePrevio = await prisma.cliente.findUnique({ where: { id } });\r\n\r\n    await prisma.cliente.update({\r\n        where: { id },\r\n        data: { nombre, correo, telefono },\r\n    });\r\n\r\n    // 2. Audit Log\r\n    // Model 'AuditoriaCambios' -> prisma.auditoriaCambios\r\n    // Fields: tabla, accion, detalle, fecha\r\n    await prisma.auditoriaCambios.create({\r\n        data: {\r\n            tabla: \"Cliente\",\r\n            accion: \"UPDATE\",\r\n            detalle: `Actualizado: ${clientePrevio?.nombre} -> ${nombre}`,\r\n            fecha: new Date(),\r\n        },\r\n    });\r\n\r\n    revalidatePath(\"/\");\r\n}\r\n\r\nexport async function deleteCliente(id: number) {\r\n    await prisma.cliente.delete({ where: { id } });\r\n    revalidatePath(\"/\");\r\n}\r\n"],"names":[],"mappings":";;;;;;;;;;;AAEA;AACA;;;;;AAEO,eAAe;IAClB,oCAAoC;IACpC,OAAO,MAAM,wHAAM,CAAC,OAAO,CAAC,QAAQ,CAAC;QACjC,SAAS;YAAE,IAAI;QAAM;IACzB;AACJ;AAEO,eAAe,cAAc,QAAkB;IAClD,MAAM,SAAS,SAAS,GAAG,CAAC;IAC5B,MAAM,SAAS,SAAS,GAAG,CAAC,UAAoB,wCAAwC;IACxF,MAAM,WAAW,SAAS,GAAG,CAAC;IAE9B,MAAM,wHAAM,CAAC,OAAO,CAAC,MAAM,CAAC;QACxB,MAAM;YACF;YACA;YACA;YACA,eAAe,IAAI;QACvB;IACJ;IAEA,IAAA,+IAAc,EAAC;AACnB;AAEO,eAAe,cAAc,EAAU,EAAE,QAAkB;IAC9D,MAAM,SAAS,SAAS,GAAG,CAAC;IAC5B,MAAM,SAAS,SAAS,GAAG,CAAC;IAC5B,MAAM,WAAW,SAAS,GAAG,CAAC;IAE9B,mBAAmB;IACnB,MAAM,gBAAgB,MAAM,wHAAM,CAAC,OAAO,CAAC,UAAU,CAAC;QAAE,OAAO;YAAE;QAAG;IAAE;IAEtE,MAAM,wHAAM,CAAC,OAAO,CAAC,MAAM,CAAC;QACxB,OAAO;YAAE;QAAG;QACZ,MAAM;YAAE;YAAQ;YAAQ;QAAS;IACrC;IAEA,eAAe;IACf,sDAAsD;IACtD,wCAAwC;IACxC,MAAM,wHAAM,CAAC,gBAAgB,CAAC,MAAM,CAAC;QACjC,MAAM;YACF,OAAO;YACP,QAAQ;YACR,SAAS,CAAC,aAAa,EAAE,eAAe,OAAO,IAAI,EAAE,QAAQ;YAC7D,OAAO,IAAI;QACf;IACJ;IAEA,IAAA,+IAAc,EAAC;AACnB;AAEO,eAAe,cAAc,EAAU;IAC1C,MAAM,wHAAM,CAAC,OAAO,CAAC,MAAM,CAAC;QAAE,OAAO;YAAE;QAAG;IAAE;IAC5C,IAAA,+IAAc,EAAC;AACnB;;;IAvDsB;IAOA;IAiBA;IA4BA;;AApDA,+OAAA;AAOA,+OAAA;AAiBA,+OAAA;AA4BA,+OAAA"}},
    {"offset": {"line": 116, "column": 0}, "map": {"version":3,"sources":["file:///E:/leguajes/New%20folder/planet-express-crm---edici%C3%B3n-3000/.next-internal/server/app/page/actions.js%20%28server%20actions%20loader%29"],"sourcesContent":["export {getClientes as '00fcabcddbe441c94e01ca3af032b6914d4a5316e0'} from 'ACTIONS_MODULE0'\nexport {createCliente as '40c6feba69c2cf17355a5c5ae76ae366d638192ec2'} from 'ACTIONS_MODULE0'\nexport {deleteCliente as '40d897e1d5a4af1c76128fb951e2ee658db1235869'} from 'ACTIONS_MODULE0'\nexport {updateCliente as '600629600b504bebb999fbe2a3be09b0f70032fd3f'} from 'ACTIONS_MODULE0'\nexport {createCliente as '40c6feba69c2cf17355a5c5ae76ae366d638192ec2'} from 'ACTIONS_MODULE0'\nexport {updateCliente as '600629600b504bebb999fbe2a3be09b0f70032fd3f'} from 'ACTIONS_MODULE0'\nexport {deleteCliente as '40d897e1d5a4af1c76128fb951e2ee658db1235869'} from 'ACTIONS_MODULE0'\n"],"names":[],"mappings":";AAAA"}}]
}